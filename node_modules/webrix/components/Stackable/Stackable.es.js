import e from"../../external/@babel/runtime/helpers/esm/extends.es.js";import t from"../../external/@babel/runtime/helpers/esm/defineProperty.es.js";import r from"../../external/@babel/runtime/helpers/esm/slicedToArray.es.js";import o from"../../external/@babel/runtime/helpers/esm/objectWithoutProperties.es.js";import a,{forwardRef as s,useContext as n,useState as c,useEffect as l}from"react";import p from"react-dom";import m from"classnames";import i from"./Stackable.context.es.js";import{DEFAULT_Z_INDEX as d}from"./Stackable.constants.es.js";import{propTypes as b,defaultProps as f}from"./Stackable.props.es.js";import"./Stackable.es2.js";var u=["zIndex","target","parent","children","style","className"];function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function y(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?j(Object(o),!0).forEach((function(r){t(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):j(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var O=s((function(t,s){var b,f=t.zIndex,j=t.target,O=t.parent,h=t.children,v=t.style,P=t.className,g=o(t,u),N=n(i),k=N.depth,x=N.ancestors,S=N.zIndex,w=null!==(b=null!=f?f:S)&&void 0!==b?b:d,z=c(""),D=r(z,2),I=D[0],E=D[1],_=m("stackable depth-".concat(k),P);return l((function(){var e="";if(O.current)for(var t=O.current.parentNode;t&&t.className&&"BODY"!==t.tagName;)e=".".concat(t.className.split(" ").join(".")).concat(e?" "+e:""),t=t.parentNode;E(x+e)}),[E,x,O]),p.createPortal(a.createElement(i.Provider,{value:{zIndex:w+1,depth:k+1,ancestors:"".concat(I," .").concat(_.split(" ").join("."))}},a.createElement("div",e({},g,{"data-ancestors":I,className:m("stackable depth-".concat(k),P),style:y(y({},v),{},{zIndex:w}),ref:s}),h)),j)}));O.displayName="Stackable",O.propTypes=b,O.defaultProps=f;export{O as default};
