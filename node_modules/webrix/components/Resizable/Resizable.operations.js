"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../external/@babel/runtime/helpers/esm/defineProperty.js"),e=require("../../utility/number/number.js"),n=require("../../utility/memory/memory.js"),i=require("../../utility/object/object.js");function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?r(Object(i),!0).forEach((function(n){t.default(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var h=function(t){return o({onBeginResize:n.noop,onResize:n.noop,onEndResize:n.noop},t)},u=function(t){return function(e,n){i.isEqual(n.prev,n.next)||(t(n.next),n.prev=n.next)}};exports.contain=function(t){return h({onBeginResize:function(e,n){n.max=t.current.getBoundingClientRect()},onResize:function(t,n){var i=t.delta,r=n.initial,o=n.next,h=n.max,u=e.clamp(o.width,0,0===i.left?h.left+h.width-r.left:r.left+r.width-h.left),a=e.clamp(o.height,0,0===i.top?h.top+h.height-r.top:r.top+r.height-h.top);n.next={left:h.left+u,top:h.top+a,width:u,height:a}}})},exports.createOperation=h,exports.lock=function(){return h({onResize:function(t,e){var n=t.delta,i=e.next,r=e.initial;0!==n.left?i.left=r.left+r.width-i.width:i.left=r.left,0!==n.top?i.top=r.top+r.height-i.height:i.top=r.top}})},exports.max=function(t,e){return h({onResize:function(n,i){var r=i.next,h=r.width,u=r.height;i.next=o(o({},i.next),{},{width:Math.min(h,t),height:Math.min(u,e)})}})},exports.min=function(t,e){return h({onResize:function(n,i){var r=i.next,h=r.width,u=r.height;i.next=o(o({},i.next),{},{width:Math.max(h,t),height:Math.max(u,e)})}})},exports.ratio=function(t){return h({onResize:function(e,n){var i=n.next;i.width/i.height>t?i.height=i.width/t:i.width=i.height*t}})},exports.relative=function(t){return h({onBeginResize:function(e,n){var i=t.current.getBoundingClientRect();n.reference=i,n.next=o(o({},n.next),{},{left:Math.round(n.next.left-i.left),top:Math.round(n.next.top-i.top)})},onResize:function(t,e){var n=e.reference,i=e.next;e.next=o(o({},e.next),{},{left:Math.round(i.left-n.left),top:Math.round(i.top-n.top)})}})},exports.resize=function(t){return h({onBeginResize:function(e,n){var i=t.current.getBoundingClientRect(),r=i.left,o=i.top,h=i.width,u=i.height;n.next={left:r,top:o,width:h,height:u},n.initial={left:r,top:o,width:h,height:u}},onResize:function(t,e){var n=t.delta,i=e.initial,r=i.left,o=i.top,h=i.width,u=i.height;e.next={width:Math.max(h+n.width,0),height:Math.max(u+n.height,0),left:r+n.left,top:o+n.top}}})},exports.snap=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return h({onResize:function(i,r){var h=r.next,u=h.width,a=h.height,f=Math.round(u/t)*t,p=Math.round(a/e)*e,c=Math.abs(u-f),l=Math.abs(a-p);r.next=o(o({},r.next),{},{width:c<=n*t/2?f:u,height:l<=n*e/2?p:a})}})},exports.update=function(t){return h({onBeginResize:u(t),onResize:u(t),onEndResize:u(t)})};
