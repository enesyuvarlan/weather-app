"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../../external/@babel/runtime/helpers/esm/defineProperty.js"),e=require("../../utility/number/number.js"),n=require("../../utility/memory/memory.js"),o=require("../../utility/object/object.js");function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}var i=function(e){return function(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(n){t.default(e,n,o[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({onBeginMove:n.noop,onMove:n.noop,onEndMove:n.noop},e)},u=function(t){return function(e,n){o.isEqual(n.prev,n.next)||(t(n.next),n.prev=n.next)}};exports.contain=function(t,n){return i({onBeginMove:function(e,o){var r=t.current.getBoundingClientRect(),i=r.width,u=r.height;o.bounds=n.current.getBoundingClientRect(),o.size={width:i,height:u}},onMove:function(t,n){var o=n.bounds,r=n.next,i=n.size;n.next={left:e.clamp(r.left,o.left,o.right-i.width),top:e.clamp(r.top,o.top,o.bottom-i.height)}}})},exports.createOperation=i,exports.move=function(t){return i({onBeginMove:function(e,n){var o=t.current.getBoundingClientRect(),r=o.top,i=o.left;n.next={top:r,left:i},n.initial={top:r,left:i}},onMove:function(t,e){var n=t.dx,o=t.dy,r=e.initial,i=r.left,u=r.top;e.next={left:i+n,top:u+o}}})},exports.relative=function(t){return i({onBeginMove:function(e,n){var o=t.current.getBoundingClientRect();n.reference=o,n.next={left:Math.round(n.next.left-o.left),top:Math.round(n.next.top-o.top)}},onMove:function(t,e){var n=e.reference,o=e.next;e.next={left:Math.round(o.left-n.left),top:Math.round(o.top-n.top)}}})},exports.snap=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return i({onMove:function(o,r){var i=r.next,u=i.top,c=i.left,f=Math.round(c/t)*t,p=Math.round(u/e)*e,l=Math.abs(c-f),a=Math.abs(u-p);r.next={left:l<=n*t/2?f:c,top:a<=n*e/2?p:u}}})},exports.trackpad=function(t){return i({onBeginMove:function(e,n){var o=e.x,r=e.y;n.initial=t.current.getBoundingClientRect(),n.next={left:o-n.initial.left,top:r-n.initial.top},n.bounds={top:0,left:0,right:n.initial.width,bottom:n.initial.height}},onMove:function(t,n){var o=t.x,r=t.y,i=n.bounds,u=n.initial;n.next={left:e.clamp(o-u.left,i.left,i.right),top:e.clamp(r-u.top,i.top,i.bottom)}}})},exports.transform=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return i({onBeginMove:function(t,n){return n.next=e.reduce((function(t,e){return e(t)}),n.next)},onMove:function(t,n){return n.next=e.reduce((function(t,e){return e(t)}),n.next)}})},exports.update=function(t){return i({onBeginMove:u(t),onMove:u(t),onEndMove:u(t)})};
